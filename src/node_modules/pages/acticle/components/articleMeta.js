import { Fragment } from "react";
import { Link } from "react-router-dom";

import SubscribeOnUser from 'components/subscribeOnUser';
import AddToFavorites from 'components/addToFavorites';

const ArticleMeta = ({
  slug,
  fetchArticleResponse,
  deleteArticle,
  isAuthor
}) => {
  return (
    <div className='article-meta'>
      <Link to={`/profiles/${fetchArticleResponse.article.author.username}`}>
        <img src={fetchArticleResponse.article.author.image} alt='' />
      </Link>
      <div className='info'>
        <Link to={`/profiles/${fetchArticleResponse.article.author.username}`}>
          {fetchArticleResponse.article.author.username}
        </Link>
        <span className='date'>{fetchArticleResponse.article.createdAt}</span>
      </div>
      {isAuthor ? (
        <span>
					<Link
            className='btn btn-outline-secondary btn-sm'
            to={`/articles/${fetchArticleResponse.article.slug}/edit`}
          >
						<i className='ion-edit' />
						Edit article
					</Link>
					<button
            className='btn btn-outline-danger btn-sm'
            onClick={deleteArticle}
          >
						<i className='ion-trash-a' />
						Delete article
					</button>
				</span>
      ) : (
        <Fragment>
          <SubscribeOnUser
            username={fetchArticleResponse.article.author.username}
            isFollowing={fetchArticleResponse.article.author.following}
          />
          <AddToFavorites
            articleSlug={slug}
            isFavorited={fetchArticleResponse.article.favorited}
            favoritesCount={fetchArticleResponse.article.favoritesCount}
            text={'Favorite Article'}
          />
        </Fragment>
      )}
    </div>
  );
};

export default ArticleMeta;